<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Workers â€” Job Application</title>
</head>
<body>

<app-header></app-header>

<div class="container">

  <article *ngFor="let app of applications" class="worker-card" [attr.data-status]="app.status?.toLowerCase()">
    <div class="worker-card__left">
      <img class="avatar" [src]="'http://localhost:8080/uploads/' + app.worker.photo">
      <div class="id">
        <h2 class="name">{{app.worker.firstName}} {{app.worker.lastName}}</h2>
        <p class="loc">{{app.worker.location.name}}</p>
        <div class="badges">
          <span class="badge">{{app.worker.compensation.compensation}}</span>
        </div>
      </div>
      <div class="occupation">
        <p class="occupation__title">Occupational fields</p>
        <span class="occupation__tag" *ngFor="let p of app.worker.profession">{{p.profession}}</span>
      </div>

    </div>

    <div class="worker-card__right">
      <dl class="facts">
        <div><dt>Job Type</dt><dd><span *ngFor="let t of app.worker.jobTypes">{{ t.jobType }}</span></dd></div>
        <div><dt>Availability</dt><dd>{{app.worker.availability.availability}}</dd></div>
        <div><dt>Education</dt><dd>{{app.worker.education.education}}</dd></div>
        <div><dt>Experience</dt><dd>{{app.worker.experience.experience}}</dd></div>
      </dl>


      <div class="actions">
        <a [routerLink]="['/worker-details', app.worker.id]" routerLinkActive="active" class="btn btn--primary">View profile</a>

        <label class="status" [attr.data-status] = "app.status?.toLowerCase()">
          <span>Status:</span>
          <select class="status__select" [(ngModel)]="app.status" (change)="updateStatus(app.id, app.status)">
            <option value="PENDING">Pending</option>
            <option value="ACCEPTED">Accept</option>
            <option value="REJECTED">Reject</option>
          </select>
          <span class="status__pill">{{ app.status }}</span>
        </label>
      </div>
    </div>
  </article>

</div>

<app-footer></app-footer>

</body>
</html>

