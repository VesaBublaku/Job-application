<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<app-header></app-header>

<main class="advanced-listing">
  <div class="container">

    <div class="filter-bar">
      <div class="filter-row">

        <div class="chip chip--wide">
          <i class="fas fa-suitcase chip__icon"></i>
          <div class="chip__body">
            <span class="chip__label">Category</span>
            <select class="chip__field chip__select" [(ngModel)]="filterModel.professionId" name="profession">
              <option [ngValue]="null" disabled hidden>Select category</option>
              <option *ngFor="let p of professions" [value]="p.id">{{p.profession}}</option>
            </select>
            <i class="fas fa-chevron-down chip__chev" aria-hidden="true"></i>
          </div>
        </div>

        <div class="chip chip--comp">
          <i class="fas fa-database chip__icon"></i>
          <div class="chip__body">
            <span class="chip__label">Compensation</span>
            <select class="chip__field chip__select" [(ngModel)]="filterModel.compensationId" name="compensation">
              <option [ngValue]="null" disabled hidden>$</option>
              <option *ngFor="let c of compensations" [value]="c.id">{{c.compensation}}</option>
            </select>
            <i class="fas fa-chevron-down chip__chev" aria-hidden="true"></i>
          </div>
        </div>

        <button class="btn-find" type="button" (click)="findWorkers()">
          <i class="fas fa-search"></i> Find Workers
        </button>
      </div>

      <div class="filter-row filter-row--sub">

        <select class="chip chip--sub" [(ngModel)]="filterModel.jobTypeId" name="jobType">
          <option [ngValue]="null" disabled hidden>Job Type</option>
          <option *ngFor="let jt of jobTypes" [value]="jt.id">{{jt.jobType}}</option>
        </select>

        <select class="chip chip--sub" [(ngModel)]="filterModel.availabilityId" name="availability">
          <option [ngValue]="null" disabled hidden>Availability</option>
          <option *ngFor="let a of availabilities" [value]="a.id">{{a.availability}}</option>
        </select>

        <select class="chip chip--sub" [(ngModel)]="filterModel.experienceId" name="experience">
          <option [ngValue]="null" disabled hidden>Experience</option>
          <option *ngFor="let e of experiences" [value]="e.id">{{e.experience}}</option>
        </select>

        <select class="chip chip--sub" [(ngModel)]="filterModel.educationId" name="education">
          <option [ngValue]="null" disabled hidden>Education</option>
          <option *ngFor="let e of educations" [value]="e.id">{{e.education}}</option>
        </select>

        <select class="chip chip--sub" [(ngModel)]="filterModel.locationId" name="loaction">
          <option [ngValue]="null" disabled hidden>Location</option>
          <option *ngFor="let l of locations" [value]="l.id">{{l.name}}</option>
        </select>
      </div>
    </div>

    <section class="results wide-layout">
      <article *ngFor="let worker of workers" class="worker-card advanced-card">
        <div class="card-left">
          <img *ngIf="worker.photo" [src]="'http://localhost:8080/uploads/' + worker.photo" alt="" class="avatar large-avatar">
          <img *ngIf="!worker.photo" [src]="'http://localhost:8080/uploads/default-avatar.jpg'" alt="" class="avatar large-avatar">

          <div class="worker-details">
            <h3>{{ worker.firstName }} {{ worker.lastName.charAt(0) }}.</h3>
            <p class="role">{{ worker.professions?.[0]?.profession || 'N/A' }}</p>
            <p class="location">{{ worker.location?.name || 'Unknown' }}</p>
          </div>
        </div>

        <div class="card-right">
          <p class="rate-label">Compensation</p>
          <div class="rate-price">{{ worker.compensation?.compensation || 'N/A' }}></div>
          <a [routerLink]="['/worker-details', worker.id]" routerLinkActive="active" class="btn btn-primary">View profile</a>
        </div>

        <div class="details-grid">
          <div class="detail-item">
            <i class="fas fa-clock"></i>
            <div>
              <div class="detail-title">Job Type</div>
              <div class="detail-value">{{ worker.jobTypes?.[0]?.jobType || 'N/A' }}</div>
            </div>
          </div>

          <div class="detail-item">
            <i class="fas fa-globe"></i>
            <div>
              <div class="detail-title">Availability</div>
              <div class="detail-value">{{ worker.availability?.availability || 'N/A' }}</div>
            </div>
          </div>

          <div class="detail-item">
            <i class="fas fa-graduation-cap"></i>
            <div>
              <div class="detail-title">Education</div>
              <div class="detail-value">{{ worker.education?.education || 'N/A' }}</div>
            </div>
          </div>

          <div class="detail-item">
            <i class="fas fa-level-up-alt"></i>
            <div>
              <div class="detail-title">Experience</div>
              <div class="detail-value">{{ worker.experience?.experience || 'N/A' }}</div>
            </div>
          </div>
        </div>
      </article>
    </section>

  </div>
</main>
<app-footer></app-footer>

</body>
</html>

